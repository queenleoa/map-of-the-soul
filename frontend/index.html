<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Map of the Soul - AO Hackathon</title>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500&display=swap">
  <link rel="stylesheet" href="styles.css">
  <script src="script.js"></script> 
</head>

<body class="scholar">
  <!-- Header -->
  <div class="header">
    <div class="header-content">
      <div class="title">MAP OF THE SOUL</div>
      <div class="mode-switcher">
        <button class="mode-btn active" data-mode="scholar">Scholar</button>
        <button class="mode-btn" data-mode="mystic">Mystic</button>
      </div>
      <button class="upload-btn" onclick="openUploadModal()">âœ¨ Spawn Your Text Artwork</button>
    </div>
  </div>

  <!-- Main canvas -->
  <div class="canvas">
    <div id="mapContainer" class="map-container">
      <svg class="connections-svg" id="connectionsSvg"></svg>
      <!-- Nodes get injected here -->
    </div>
  </div>

  <!-- Legend -->
  <div class="legend">
    <div class="legend-title">Relationships</div>
    <div id="legendContent"></div>
  </div>

  <!-- Artwork detail modal -->
  <div class="modal-overlay" id="artworkModal">
    <div class="modal">
      <div class="modal-header">
        <h2 id="artworkTitle">Artwork Title</h2>
        <button class="close-btn" onclick="closeArtworkModal()">Close</button>
      </div>
      <div class="modal-tabs">
        <button class="tab-btn active" data-tab="text">Text Artwork</button>
        <button class="tab-btn" data-tab="analysis">AI Analysis</button>
      </div>
      <div class="modal-content">
        <div id="textTab" class="tab-content">
          <div class="artwork-text" id="artworkText"></div>
          <div class="metadata-box">
            <p><strong>Title:</strong> <span id="artworkTitleMeta">-</span></p>
            <p><strong>Wallet:</strong> <span id="walletAddress">0x...</span></p>
            <p><strong>Upload Date:</strong> <span id="uploadDate">-</span></p>
            <p><strong>Agent PID:</strong> <code id="agentPid">-</code></p>
            <p><strong>Arweave TX:</strong> <code id="arweaveTx">-</code></p>
          </div>
        </div>
        <div id="analysisTab" class="tab-content" style="display: none;">
          <div id="analysisContent"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Comparison modal -->
  <div class="modal-overlay" id="comparisonModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Relationship Analysis</h2>
        <button class="close-btn" onclick="closeComparisonModal()">Close</button>
      </div>
      <div class="modal-tabs">
        <button class="tab-btn active" data-tab="comparison">Agent Discussion</button>
        <button class="tab-btn" data-tab="artwork1">First Artwork</button>
        <button class="tab-btn" data-tab="artwork2">Second Artwork</button>
      </div>
      <div class="modal-content">
        <div id="comparisonTab" class="tab-content">
          <div id="comparisonContent"></div>
        </div>
        <div id="artwork1Tab" class="tab-content" style="display: none;">
          <div class="artwork-text" id="artwork1Text"></div>
        </div>
        <div id="artwork2Tab" class="tab-content" style="display: none;">
          <div class="artwork-text" id="artwork2Text"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Upload modal -->
  <div class="modal-overlay" id="uploadModal">
    <div class="modal">
      <div class="modal-header">
        <h2>Spawn Your Text Artwork</h2>
        <button class="close-btn" onclick="closeUploadModal()">Close</button>
      </div>
      <div class="modal-content">
        <form onsubmit="handleUpload(event)">
          <div class="form-group">
            <label class="form-label">Artwork Title</label>
            <input type="text" class="form-input" id="titleInput" placeholder="Enter a title for your artwork" required>
          </div>
          <div class="form-group">
            <label class="form-label">Your Text Artwork</label>
            <textarea class="form-textarea" id="artworkInput" placeholder="Enter your text artwork here..."
              required></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Choose Your Icon</label>
            <div class="icon-grid" id="iconGrid"></div>
          </div>
          <button type="submit" class="submit-btn">ðŸš€ Spawn Art Agent</button>
        </form>
      </div>
    </div>
  </div>
</body>

</html>